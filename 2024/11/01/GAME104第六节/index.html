<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <title>
      
        GAME104第六节 | 渔人的小小世界
      
    </title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    
      <link rel="apple-touch-icon"
            sizes="180x180"
            href="/images/apple-touch-icon.png" />
    
    
      <link rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/Doraemon32x32.ico" />
    
    
      <link rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/Doraemon16x16.ico" />
    
    
      <link rel="mask-icon"
            href="/images/logo.svg"
            color="" />
    
    
    
      
  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/normal.ttf);
        font-weight: normal;
    }
  </style>

  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/bold.ttf);
        font-weight: bold;
    }
  </style>


    
    <link rel="stylesheet"
          type="text/css"
          href='/css/layout.css' />
    
    
  <link rel="stylesheet" type="text/css" href="/css/post.css"/>
  

  <meta name="generator" content="Hexo 7.1.1"></head>
  <body>
    
      <div id="search-mask" style="display:none">
  <div class="search-main" id="search-main">
    <div class="search__head">
      <div class="search-form">
        <svg t="1706347533072"
             class="icon"
             viewBox="0 0 1024 1024"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="7828"
             width="20"
             height="20">
          <path d="M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z" fill="#000000" p-id="7829">
          </path>
        </svg>
        <input id="search-input" placeholder="搜索文章">
        <svg t="1706361500528"
             id="search-clear"
             class="icon"
             viewBox="0 0 1024 1024"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="4351"
             width="20"
             height="20">
          <path d="M512 562.688l-264.2944 264.2944-50.688-50.688L461.312 512 197.0176 247.7056l50.688-50.688L512 461.312l264.2944-264.2944 50.688 50.688L562.688 512l264.2944 264.2944-50.688 50.688L512 562.688z" fill="#00" p-id="4352">
          </path>
        </svg>
      </div>
    </div>
    <div class="search__body" id="search-result"></div>
    <div class="search__foot"></div>
  </div>
</div>

    
    <div class="head">
      <div class="nav">
        <a href='/' class="nav-logo">
          <img alt="logo" height="60px" width="60px" src="/images/Doraemon128x128.ico" />
        </a>
        <input id="navBtn" type="checkbox" />
        <div class="nav-right">
          
            <div class="search-outer">
  <div class="search" id="search-btn">
    <svg t="1706347533072"
         class="icon"
         viewBox="0 0 1024 1024"
         version="1.1"
         xmlns="http://www.w3.org/2000/svg"
         p-id="7828"
         width="20"
         height="20">
      <path d="M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z" fill="#000000" p-id="7829">
      </path>
    </svg>
    <span>搜索</span>
    <span class="search-shortcut-key">Ctrl K</span>
  </div>
</div>

          
          <div class="nav-menu">
            
              
                <a class="nav-menu-item" href="/computerStudy">技术学习</a>
              
                <a class="nav-menu-item" href="/civilStudy">公考学习</a>
              
                <a class="nav-menu-item" href="/life">休闲生活</a>
              
            
            
          </div>
        </div>
        <label class="nav-btn" for="navBtn"></label>
      </div>
    </div>
    <div class="body">
      
  <article class="post-content">
    <div class="post-inner--toc">
      <div class="post-content__head">
        <div class="post-title">GAME104第六节</div>
        <div class="post-info">
          
  <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E%E5%AF%BC%E8%AE%BA-GAME104/" class="post-tag">#游戏引擎导论 GAME104</a>


          <span class="post-date">2024-11-01</span>
        </div>
      </div>
      
        <aside class="toc-outer">
          <div class="toc-title">目录</div>
          <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E2%80%9C%E5%A4%A7%E5%9C%B0%E4%B9%8B%E7%A5%9E%E2%80%9D"><span class="post-toc-text">“大地之神”</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%9C%B0%E5%BD%A2%E7%9A%84%E5%87%A0%E4%BD%95"><span class="post-toc-text">地形的几何</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Heightfield-%E9%AB%98%E5%BA%A6%E5%9C%BA"><span class="post-toc-text">Heightfield 高度场</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#LOD-%E5%A4%9A%E7%BB%86%E8%8A%82%E5%B1%82%E6%AC%A1"><span class="post-toc-text">LOD 多细节层次</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#FoV-%E8%A7%86%E5%9C%BA%E8%A7%92"><span class="post-toc-text">FoV 视场角</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Mesh-Subdivision-%E7%BD%91%E6%A0%BC%E7%BB%86%E5%88%86"><span class="post-toc-text">Mesh Subdivision 网格细分</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%BB%86%E5%88%86%E7%9A%84%E4%B8%A4%E5%A4%A7%E6%B3%95%E5%88%99"><span class="post-toc-text">细分的两大法则</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Triangle-Based-Subdivision"><span class="post-toc-text">Triangle-Based Subdivision</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#QuadTree-Based-Subdivision"><span class="post-toc-text">QuadTree-Based Subdivision</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Triangulated-lrregular-Network-TIN"><span class="post-toc-text">Triangulated lrregular Network (TIN)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Hardware-Tessellation"><span class="post-toc-text">Hardware Tessellation</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF"><span class="post-toc-text">其他技术</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Real-Time-Deformable-Terrrain-%E5%AE%9E%E6%97%B6%E5%8F%AF%E5%8F%98%E5%BD%A2%E5%9C%B0%E5%BD%A2"><span class="post-toc-text">Real-Time Deformable Terrrain 实时可变形地形</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Non-Heightfield-Terrain-%E9%9D%9E%E9%AB%98%E5%BA%A6%E5%9C%BA%E5%9C%B0%E5%BD%A2"><span class="post-toc-text">Non-Heightfield Terrain 非高度场地形</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Volumetric-Representation-%E4%BD%93%E7%B4%A0%E5%8C%96%E8%A1%A8%E7%A4%BA"><span class="post-toc-text">Volumetric Representation 体素化表示</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Marching-Cubes"><span class="post-toc-text">Marching Cubes</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%9C%B0%E5%BD%A2%E7%9A%84%E6%9D%90%E8%B4%A8"><span class="post-toc-text">地形的材质</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%BA%B9%E7%90%86%E6%9D%90%E8%B4%A8"><span class="post-toc-text">纹理材质</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%9D%90%E8%B4%A8%E7%AE%A1%E7%90%86%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="post-toc-text">材质管理和使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Height-Map"><span class="post-toc-text">Height Map</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Texture-Array"><span class="post-toc-text">Texture Array</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%BA%B9%E7%90%86%E7%BB%86%E8%8A%82%E4%BC%98%E5%8C%96"><span class="post-toc-text">纹理细节优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Parallax-Mapping"><span class="post-toc-text">Parallax Mapping</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Displacement-Mapping"><span class="post-toc-text">Displacement Mapping</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%BA%B9%E7%90%86%E5%AD%98%E5%82%A8%E6%8A%80%E6%9C%AF"><span class="post-toc-text">纹理存储技术</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Virtual-Texture"><span class="post-toc-text">Virtual Texture</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#DirectStorage"><span class="post-toc-text">DirectStorage</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#DMA"><span class="post-toc-text">DMA</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="post-toc-text">可能出现的问题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%B2%BE%E5%BA%A6%E6%BA%A2%E5%87%BA"><span class="post-toc-text">浮点数精度溢出</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF-1"><span class="post-toc-text">其他技术</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Tree-Rendering"><span class="post-toc-text">Tree Rendering</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Decorator-Rendering"><span class="post-toc-text">Decorator Rendering</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Road-and-Decal-Rendering"><span class="post-toc-text">Road and Decal Rendering</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E5%A4%A7%E6%B0%94"><span class="post-toc-text">大气</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Analytic-Atmosphere-Appearance-Modeling"><span class="post-toc-text">Analytic Atmosphere Appearance Modeling</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Participating-Media"><span class="post-toc-text">Participating Media</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Volume-Rendering-Equation"><span class="post-toc-text">Volume Rendering Equation</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%85%89%E4%BC%A0%E6%92%AD"><span class="post-toc-text">光传播</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%95%A3%E5%B0%84"><span class="post-toc-text">散射</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Rayleigh-Scattering"><span class="post-toc-text">Rayleigh Scattering</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Mie-scattering"><span class="post-toc-text">Mie scattering</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%90%B8%E6%94%B6%E6%95%88%E5%BA%94"><span class="post-toc-text">吸收效应</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%A4%9A%E6%AC%A1%E6%95%A3%E5%B0%84"><span class="post-toc-text">多次散射</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Ray-Marching-%E5%85%89%E7%BA%BF%E6%AD%A5%E8%BF%9B"><span class="post-toc-text">Ray Marching 光线步进</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Precomputed-Atmospheric-Scattering"><span class="post-toc-text">Precomputed Atmospheric Scattering</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Production-Friendly-Quick-Sky-and-Atmosphere-Rendering"><span class="post-toc-text">Production Friendly Quick Sky and Atmosphere Rendering</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E4%BA%91"><span class="post-toc-text">云</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Mesh-Based-Cloud-Modeling"><span class="post-toc-text">Mesh-Based Cloud Modeling</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Billboard-Cloud"><span class="post-toc-text">Billboard Cloud</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Volumetric-Cloud-Modeling-%E4%BD%93%E7%B4%A0%E5%8C%96%E4%BA%91%E6%9C%B5"><span class="post-toc-text">Volumetric Cloud Modeling 体素化云朵</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#weather-texture"><span class="post-toc-text">weather texture</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Cloud-Density-Model-%E4%BA%91%E5%AF%86%E5%BA%A6%E6%A8%A1%E5%9E%8B"><span class="post-toc-text">Cloud Density Model 云密度模型</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Ray-Marching-%E5%85%89%E7%BA%BF%E6%AD%A5%E8%BF%9B-1"><span class="post-toc-text">Ray Marching 光线步进</span></a></li></ol></li></ol>
          <a href="#" class="toc-top">回到顶部</a>
        </aside>
      
      <div class="post-content__body">
        
          <div class="post-gallery">
            
          </div>
        
        <h1 id="“大地之神”"><a href="#“大地之神”" class="headerlink" title="“大地之神”"></a>“大地之神”</h1><h2 id="地形的几何"><a href="#地形的几何" class="headerlink" title="地形的几何"></a>地形的几何</h2><h3 id="Heightfield-高度场"><a href="#Heightfield-高度场" class="headerlink" title="Heightfield 高度场"></a>Heightfield 高度场</h3><p>表示和渲染地形最简单的处理方案。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101142720.png" alt="image-20241101142713113"></p>
<ul>
<li>几十年前的测绘就用过，等高线、地形图。</li>
</ul>
<p>大致原理：每隔1m&#x2F;0.5m划分一个网格，然后根据Heighfield的高度就可以得到地形的高度。</p>
<h3 id="LOD-多细节层次"><a href="#LOD-多细节层次" class="headerlink" title="LOD 多细节层次"></a>LOD 多细节层次</h3><p>LOD Level of Detail 多细节层次</p>
<ul>
<li>通过生成不同精度的模型层级，在不同观察距离下动态选择合适的模型进行渲染，从而在保证视觉效果的同时提高渲染效率</li>
<li>根据物体在屏幕的远近或信号的敏感度，可以设置不通过的精度。</li>
</ul>
<p>可以根据摄像机距离调整模型细节。</p>
<h3 id="FoV-视场角"><a href="#FoV-视场角" class="headerlink" title="FoV 视场角"></a>FoV 视场角</h3><p>FoV Field of View 视场角</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101143428.png" alt="image-20241101143428594"></p>
<p>我们真正关心的是FoV里面的东西，FoV内部的细化，FoV外面的稀疏。</p>
<p>FoV越来越窄，屏幕上看到的物体放到越来越大，让实现聚焦，失去一定的视野</p>
<p>倍镜的原理，越高倍的望远镜，FoV就会越来越小</p>
<p>FoV提供视野范围和细节表现</p>
<h3 id="Mesh-Subdivision-网格细分"><a href="#Mesh-Subdivision-网格细分" class="headerlink" title="Mesh Subdivision 网格细分"></a>Mesh Subdivision 网格细分</h3><p>把地形变成一个个mesh格子，越细分越精细。</p>
<h4 id="细分的两大法则"><a href="#细分的两大法则" class="headerlink" title="细分的两大法则"></a>细分的两大法则</h4><ul>
<li>注意摄像机和FoV的距离</li>
<li>对网格简化合并时，采样点会变少，在视空间上真实和地面的误差不要超过一个像素（理想状态下）</li>
</ul>
<h4 id="Triangle-Based-Subdivision"><a href="#Triangle-Based-Subdivision" class="headerlink" title="Triangle-Based Subdivision"></a>Triangle-Based Subdivision</h4><p>Triangle-Based Subdivision 三角形细分</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101144934.png" alt="image-20241101144934318"></p>
<p>地形是一个个格子，格子切一刀就是等腰直角三角形。</p>
<p>对等腰直角三角形最长边切一刀，永远得到两个新的等腰直角三角形，像是二叉树的结构。</p>
<p>T-Junctions：mesh中出现的一种特殊情况，某一片mesh的边界与另一个的中心点相交形成一个T字型的交叉。</p>
<p>缺点：不符合制作地形的直觉（直觉是处理正方形）</p>
<h4 id="QuadTree-Based-Subdivision"><a href="#QuadTree-Based-Subdivision" class="headerlink" title="QuadTree-Based Subdivision"></a>QuadTree-Based Subdivision</h4><p>QuadTree-Based Subdivision 四边形细分</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101144945.png" alt="image-20241101144945758"></p>
<p>现代用的最多还是基于四叉树的表达（正方形切分）</p>
<p><strong>T-Junctions的解决方法：</strong></p>
<ul>
<li><p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101145301.png" alt="image-20241101145301351"></p>
</li>
<li><p>把多的点向上或者向下吸附。</p>
</li>
</ul>
<h4 id="Triangulated-lrregular-Network-TIN"><a href="#Triangulated-lrregular-Network-TIN" class="headerlink" title="Triangulated lrregular Network (TIN)"></a>Triangulated lrregular Network (TIN)</h4><p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101174415.png" alt="image-20241101174415457"></p>
<p>用不规则的三角形表达地形。</p>
<p>用面片简化的方法，把很多的不必要的顶点省略掉。</p>
<p>现代游戏很少用。</p>
<p><strong>优缺点：</strong></p>
<ul>
<li>缺点：要预处理</li>
<li>优点：比起前两个画三角形很少</li>
</ul>
<h4 id="Hardware-Tessellation"><a href="#Hardware-Tessellation" class="headerlink" title="Hardware Tessellation"></a>Hardware Tessellation</h4><p>GPU处理地形的网格化。</p>
<h3 id="其他技术"><a href="#其他技术" class="headerlink" title="其他技术"></a>其他技术</h3><h4 id="Real-Time-Deformable-Terrrain-实时可变形地形"><a href="#Real-Time-Deformable-Terrrain-实时可变形地形" class="headerlink" title="Real-Time Deformable Terrrain 实时可变形地形"></a>Real-Time Deformable Terrrain 实时可变形地形</h4><p>一种模拟地形动态变化的技术。</p>
<p>允许地形在游戏或模拟环境中实时响应物理作用力，如轮胎沟痕、车辆行驶、爆炸、脚步等，产生形变效果</p>
<h4 id="Non-Heightfield-Terrain-非高度场地形"><a href="#Non-Heightfield-Terrain-非高度场地形" class="headerlink" title="Non-Heightfield Terrain 非高度场地形"></a>Non-Heightfield Terrain 非高度场地形</h4><p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101150843.png" alt="image-20241101150843891"></p>
<p>一种不依赖于高度图（Heightmap）来表示三维地形的技术。</p>
<p>主要用来处理那些高度图难以表达的复杂地形特征，比如洞穴、悬崖、隧道等。</p>
<p>挖隧道：标记顶点。如果检测到这个顶点是non，那就让用到这个顶点的三角形全部去掉。</p>
<h4 id="Volumetric-Representation-体素化表示"><a href="#Volumetric-Representation-体素化表示" class="headerlink" title="Volumetric Representation 体素化表示"></a>Volumetric Representation 体素化表示</h4><ul>
<li>一种在三维空间中表示物体和场景的技术。</li>
<li>过将空间划分为离散的体素（voxel），每个体素存储特定的数据（如颜色、密度、光照信息等），从而构建起整个三维模型或场景</li>
</ul>
<p>现代游戏引擎用的很少。</p>
<p>在三维空间采点，对每个点表示一个权重值（表示是否有物质）。</p>
<h4 id="Marching-Cubes"><a href="#Marching-Cubes" class="headerlink" title="Marching Cubes"></a>Marching Cubes</h4><p>一种从三维离散数据场中提取等值面的经典算法。</p>
<p>在空间上有采样点，在他上下左右采8个点，那么14种方法切分cube，可以形成一个三角面片集。</p>
<p>是CT扫描的方法，在流体模拟、虚拟数字人等等都有应用。</p>
<h2 id="地形的材质"><a href="#地形的材质" class="headerlink" title="地形的材质"></a>地形的材质</h2><h3 id="纹理材质"><a href="#纹理材质" class="headerlink" title="纹理材质"></a>纹理材质</h3><p>假设用PBR的MR模型。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214550.png" alt="image-20241101175012073"></p>
<h3 id="材质管理和使用"><a href="#材质管理和使用" class="headerlink" title="材质管理和使用"></a>材质管理和使用</h3><h4 id="Height-Map"><a href="#Height-Map" class="headerlink" title="Height Map"></a>Height Map</h4><ul>
<li>用于定义三维地形表面高程的数据表示方法</li>
<li>是个灰度图像，每个像素的灰度值对应于地形的高度信息</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101175607.png" alt="image-20241101175607763"></p>
<p>Height Map提供了地形的高程信息，可用于在地形上混合不同的纹理。</p>
<p>简单的材质混合借此实现材质自然过渡。</p>
<h4 id="Texture-Array"><a href="#Texture-Array" class="headerlink" title="Texture Array"></a>Texture Array</h4><p>一种高效的纹理管理技术，将多个纹理存储在一个纹理数组中</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101152208.png" alt="image-20241101152207952"></p>
<p>能够高效的处理和混合多种纹理材质，适用于需要大量纹理的场景，如地形渲染和角色换装等</p>
<h3 id="纹理细节优化"><a href="#纹理细节优化" class="headerlink" title="纹理细节优化"></a>纹理细节优化</h3><p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101181337.png" alt="image-20241101181337608"></p>
<h4 id="Parallax-Mapping"><a href="#Parallax-Mapping" class="headerlink" title="Parallax Mapping"></a>Parallax Mapping</h4><p>Parallax Mapping 视差映射</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/01/20241101181326.png" alt="image-20241101181326631"></p>
<p>通过改变纹理坐标来模拟凹凸不平的表面效果</p>
<h4 id="Displacement-Mapping"><a href="#Displacement-Mapping" class="headerlink" title="Displacement Mapping"></a>Displacement Mapping</h4><p>Displacement Mapping 位移映射</p>
<p>一种增强三维图形视觉效果的技术，它</p>
<p>通过根据纹理图（通常是高度图）中的值实际改变模型的几何形状来增加表面细节。</p>
<h3 id="纹理存储技术"><a href="#纹理存储技术" class="headerlink" title="纹理存储技术"></a>纹理存储技术</h3><h4 id="Virtual-Texture"><a href="#Virtual-Texture" class="headerlink" title="Virtual Texture"></a>Virtual Texture</h4><p>Virtual Texture 虚拟纹理</p>
<p>现代游戏引擎都在用这个。</p>
<p>现代计算机架构中，游戏数据就是在硬盘-内存-显存来回调度，中间都需要通过内存进行调度。</p>
<p>VT把要用到的东西放内存中，不用的放硬盘上。如果将要用到硬盘上的东西，那就把他从硬盘中拿出放到内存中，内存中目前用不到的放回去。</p>
<h4 id="DirectStorage"><a href="#DirectStorage" class="headerlink" title="DirectStorage"></a>DirectStorage</h4><p>游戏数据从硬盘到内存，而此时不在内存中不压缩，直接到了显存中GPU来解压。、</p>
<p>传输效率高。</p>
<h4 id="DMA"><a href="#DMA" class="headerlink" title="DMA"></a>DMA</h4><p>DMA Direct Memory Access</p>
<p>游戏数据直接从硬盘到显存，不经过内存。</p>
<h2 id="可能出现的问题"><a href="#可能出现的问题" class="headerlink" title="可能出现的问题"></a>可能出现的问题</h2><h3 id="浮点数精度溢出"><a href="#浮点数精度溢出" class="headerlink" title="浮点数精度溢出"></a>浮点数精度溢出</h3><p>float-32个byte</p>
<p>解决方法：Camera-Relative Rendering</p>
<ul>
<li>将所有的物体的距离全部以相机为原点的坐标系。</li>
</ul>
<h2 id="其他技术-1"><a href="#其他技术-1" class="headerlink" title="其他技术"></a>其他技术</h2><h3 id="Tree-Rendering"><a href="#Tree-Rendering" class="headerlink" title="Tree Rendering"></a>Tree Rendering</h3><p>一种专门处理树木渲染的技术</p>
<h3 id="Decorator-Rendering"><a href="#Decorator-Rendering" class="headerlink" title="Decorator Rendering"></a>Decorator Rendering</h3><p>一种在渲染过程中添加装饰（decorators）的技术，用于实现特定的视觉效果或增强渲染品质</p>
<p>草、小碎石等。</p>
<h3 id="Road-and-Decal-Rendering"><a href="#Road-and-Decal-Rendering" class="headerlink" title="Road and Decal Rendering"></a>Road and Decal Rendering</h3><p>在游戏引擎中渲染道路和贴花。</p>
<h1 id="大气"><a href="#大气" class="headerlink" title="大气"></a>大气</h1><h2 id="Analytic-Atmosphere-Appearance-Modeling"><a href="#Analytic-Atmosphere-Appearance-Modeling" class="headerlink" title="Analytic Atmosphere Appearance Modeling"></a>Analytic Atmosphere Appearance Modeling</h2><p>Analytic Atmosphere Appearance Modeling 分析型大气外观建模</p>
<p>模拟大气外观的方法，是渲染大气最简单的方式，通过拟合出对应函数。</p>
<p>通过函数，加入参数直接算出大气中的光散射和吸收现象，从而生成天空的颜色和大气效果。</p>
<h2 id="Participating-Media"><a href="#Participating-Media" class="headerlink" title="Participating Media"></a>Participating Media</h2><p>（大气的）参与介质。相当于把大气中存在的介质混合。</p>
<h2 id="Volume-Rendering-Equation"><a href="#Volume-Rendering-Equation" class="headerlink" title="Volume Rendering Equation"></a>Volume Rendering Equation</h2><p>Volume Rendering Equation 体积渲染方程 VRE</p>
<p>描述光在体积介质中传播、散射和吸收的数学模型</p>
<p>基于Radiative Transfer Equation RTE 辐射传输方程</p>
<p>VRE 考虑了光线在通过体积介质时的衰减和散射，用于计算观察者看到的体积介质的最终颜色</p>
<h2 id="光传播"><a href="#光传播" class="headerlink" title="光传播"></a>光传播</h2><h3 id="散射"><a href="#散射" class="headerlink" title="散射"></a>散射</h3><p>这两个基本就是拟合方程，是散射方面的两个理论模型。</p>
<h4 id="Rayleigh-Scattering"><a href="#Rayleigh-Scattering" class="headerlink" title="Rayleigh Scattering"></a>Rayleigh Scattering</h4><p>解释天空为什么呈现蓝色以及日落时天空呈现红色的理论。</p>
<h4 id="Mie-scattering"><a href="#Mie-scattering" class="headerlink" title="Mie scattering"></a>Mie scattering</h4><p>描述了光波与尺寸与光波长可比的粒子相互作用时的散射现象。</p>
<p>Mie scattering适用于描述更大粒子的散射行为</p>
<p>比如：fog、日晕</p>
<h3 id="吸收效应"><a href="#吸收效应" class="headerlink" title="吸收效应"></a>吸收效应</h3><p>O3、CH4</p>
<h3 id="多次散射"><a href="#多次散射" class="headerlink" title="多次散射"></a>多次散射</h3><p>Multi Scattering 多次散射</p>
<h4 id="Ray-Marching-光线步进"><a href="#Ray-Marching-光线步进" class="headerlink" title="Ray Marching 光线步进"></a>Ray Marching 光线步进</h4><p>沿着光的路线一次一次的计算积分。</p>
<h4 id="Precomputed-Atmospheric-Scattering"><a href="#Precomputed-Atmospheric-Scattering" class="headerlink" title="Precomputed Atmospheric Scattering"></a>Precomputed Atmospheric Scattering</h4><p>预计算地面到地球边界的通透度，然后把大气的散射现象（通透度现象）全部变成表格，全部提前算好。</p>
<p>天顶角</p>
<p>缺点：计算时间相当长。</p>
<h2 id="Production-Friendly-Quick-Sky-and-Atmosphere-Rendering"><a href="#Production-Friendly-Quick-Sky-and-Atmosphere-Rendering" class="headerlink" title="Production Friendly Quick Sky and Atmosphere Rendering"></a>Production Friendly Quick Sky and Atmosphere Rendering</h2><p>Production Friendly Quick Sky and Atmosphere Rendering 快速天空和大气渲染技术</p>
<p>目前游戏引擎（UE）中常用的方法。</p>
<p>大胆假设四面八方的光散射过来是均匀的，然后算可能的百分比。</p>
<p>好处：符合人的直觉。</p>
<h1 id="云"><a href="#云" class="headerlink" title="云"></a>云</h1><h2 id="Mesh-Based-Cloud-Modeling"><a href="#Mesh-Based-Cloud-Modeling" class="headerlink" title="Mesh-Based Cloud Modeling"></a>Mesh-Based Cloud Modeling</h2><p>Mesh-Based Cloud Modeling 基于网格的云建模</p>
<p>用mesh硬生生做。</p>
<h2 id="Billboard-Cloud"><a href="#Billboard-Cloud" class="headerlink" title="Billboard Cloud"></a>Billboard Cloud</h2><p>Billboard Cloud 广告牌云</p>
<p>通过使用二维贴图（广告牌）来模拟云的效果。</p>
<p>使用多个角度的切片来替代三维模型，从而在远距离观察时与原物体类似。</p>
<h2 id="Volumetric-Cloud-Modeling-体素化云朵"><a href="#Volumetric-Cloud-Modeling-体素化云朵" class="headerlink" title="Volumetric Cloud Modeling 体素化云朵"></a>Volumetric Cloud Modeling 体素化云朵</h2><p>通过使用体素（体积像素）来表示云朵的体积数据，从而实现详细的云朵形状和动态效果。</p>
<h3 id="weather-texture"><a href="#weather-texture" class="headerlink" title="weather texture"></a>weather texture</h3><p>通过使用纹理来定义云的形状、厚度和分布</p>
<h2 id="Cloud-Density-Model-云密度模型"><a href="#Cloud-Density-Model-云密度模型" class="headerlink" title="Cloud Density Model 云密度模型"></a>Cloud Density Model 云密度模型</h2><p>通过云的形状、结构、灰度和透光程度等特征，描述云朵在三维空间中分布的模型。</p>
<p>Noise Functions 噪声函数：比如Perlin Noise、voronoi等。</p>
<p>可以再加上Noise Functions的处理，增加更多的细节和随机性。</p>
<h2 id="Ray-Marching-光线步进-1"><a href="#Ray-Marching-光线步进-1" class="headerlink" title="Ray Marching 光线步进"></a>Ray Marching 光线步进</h2><p>沿着视线方向逐步采样云的密度，从而累积云的颜色和不透明度。</p>

      </div>
    </div>
    
      <script src='https://unpkg.com/mermaid@latest/dist/mermaid.min.js'></script>
      <script>
        if (window.mermaid) {
          mermaid.initialize({"startOnload":true});
        }
      </script>
    
  </article>
  <div class="post__foot">
    
      <div class="like-author">
  <input type="checkbox" id="likeCode" />
  <div class="author-face">
    <img height="100px"
         width="100px"
         id="front-face"
         alt="author face"
         src="/assets/Head.jpg" />
    <img height="100px"
         width="100px"
         id="back-face"
         alt="like code"
         src="/assets/Pay.jpg" />
  </div>
  <div class="like-text">“喜欢的话，请给作者倒杯卡布奇诺”</div>
  <label for="likeCode" class="like-btn">
    <svg viewBox="0 0 1024 1024"
         width="20px"
         style="margin-right: 10px"
         height="20px">
      <path d="M466.88 908.96L113.824 563.296a270.08 270.08 0 0 1 0-387.392c108.8-106.56 284.896-106.56 393.696 0 1.504 1.472 2.976 2.944 4.448 4.48 1.472-1.536 2.944-3.008 4.448-4.48 108.8-106.56 284.896-106.56 393.696 0a269.952 269.952 0 0 1 34.016 347.072l-387.392 385.6a64 64 0 0 1-89.92 0.384z" p-id="13650" fill="#ee4242" />
    </svg>
    喜欢作者
  </label>
</div>

    
    <div class="post-nav">
  
    <a class="post-nav-item-left" href="/2024/11/04/GAME104%E7%AC%AC%E4%B8%83%E8%8A%82/">
      <div class="text-align">
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596" />
        </svg>
        <span class="text-small">上一篇</span>
      </div>
      <div>GAME104第七节</div>
    </a>
  
  <div class="vhr"></div>
  
    <a class="post-nav-item-right" href="/2024/10/31/GAME104%E7%AC%AC%E4%BA%94%E8%8A%82/">
      <div class="text-align">
        <span class="text-small">下一篇</span>
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             transform="scale(-1,-1)"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596" />
        </svg>
      </div>
      GAME104第五节
    </a>
  
</div>

    
      <div class="related-post">
  <div class="related__head">
  <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E%E5%AF%BC%E8%AE%BA-GAME104/" class="post-tag">#游戏引擎导论 GAME104</a>

</div>
  <div class="realated__body">
    
      <div class="null"><div class="null-item"><div class="null-title"><a href="\2024\10\28\GAME104第一节\" title="GAME104第一节" rel="bookmark">GAME104第一节</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\10\28\GAME104第二节\" title="GAME104第二节" rel="bookmark">GAME104第二节</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\10\28\GAME104第三节\" title="GAME104第三节" rel="bookmark">GAME104第三节</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\04\13\hexo博客搭建\" title="hexo博客搭建" rel="bookmark">hexo博客搭建</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\04\13\Shader学习（一）：基本概念\" title="Shader学习（一）：基本概念" rel="bookmark">Shader学习（一）：基本概念</a></div></div></div>
    
  </div>
</div>

    
    
  </div>

    </div>
    <div class="foot">
      <div class="foot-inner">
        <div class="foot__head">
          
            <div class="foot-line">
              <div class="matts">不</div><div class="matts">气</div><div class="matts">馁</div>
            </div>
          
            <div class="foot-line">
              <div class="matts">有</div><div class="matts">召</div><div class="matts">唤</div>
            </div>
          
            <div class="foot-line">
              <div class="matts">爱</div><div class="matts">自</div><div class="matts">由</div>
            </div>
          
        </div>
        <div class="foot__body">
          
            <div class="foot-item">
              <div class="foot-item__head">朋友</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/icon/icon-link.svg" />
                    <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">Theme Tranquility</a>
                  </div>
                
                <div class="text">
                  <img alt="link" height="20px" width="20px" src="/images/icon/icon-link+.svg" />
                  <a class="foot-link"
                     href="mailto:1463890764@qq.com?subject=%E7%94%B3%E8%AF%B7%20Hozen.site%20%E7%9A%84%E5%8F%8B%E9%93%BE%E4%BD%8D%E7%BD%AE">
                  申请友链</a>
                </div>
              </div>
            </div>
          
          
            <div class="foot-item">
              <div class="foot-item__head">账号</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-github.svg" />
                    <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/Disjoint3">Disjoint3</a>
                  </div>
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-zh.svg" />
                    <a class="foot-link" target="_blank" rel="noopener" href="https://www.zhihu.com/people/despair-49-89">despair</a>
                  </div>
                
              </div>
            </div>
          
          <div class="foot-item">
            <div class="foot-item__head">联系</div>
            <div class="foot-item__body">
              <div class="text">
                <img alt="link" height="20px" width="20px" src="/images/icon/icon-email.svg" />
                <a class="foot-link" href="mailto:1463890764@qq.com">1463890764@qq.com</a>
              </div>
            </div>
          </div>
        </div>
        <div class="copyright">
          <a href="http://example.com">渔人的小小世界</a> &nbsp;|&nbsp;由&nbsp;<a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>&nbsp;及&nbsp;
          <svg width="20" height="20" viewBox="0 0 725 725">
            <path fill-rule="evenodd" fill="rgb(221, 221, 221)" d="M145.870,236.632 L396.955,103.578 L431.292,419.44 L156.600,522.53 L145.870,236.632 Z" />
            <path fill-rule="evenodd" fill="rgb(159, 159, 159)" d="M396.955,103.578 L564.345,234.486 L611.558,513.469 L431.292,419.44 L396.955,103.578 Z" />
            <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M431.292,419.44 L611.558,513.469 L358.327,595.18 L156.600,522.53 L431.292,419.44 Z" />
          </svg>
          <a target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">致远</a>&nbsp;驱动
        </div>
      </div>
    </div>
    
    
      <script src="/js/search.js"></script>
      <script>searchInitialize("/search.json")</script>
    
    
  

  </body>
</html>
