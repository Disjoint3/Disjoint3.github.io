<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <title>
      
        GAME104第九节 | 渔人的小小世界
      
    </title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    
      <link rel="apple-touch-icon"
            sizes="180x180"
            href="/images/apple-touch-icon.png" />
    
    
      <link rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/Doraemon32x32.ico" />
    
    
      <link rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/Doraemon16x16.ico" />
    
    
      <link rel="mask-icon"
            href="/images/logo.svg"
            color="" />
    
    
    
      
  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/normal.ttf);
        font-weight: normal;
    }
  </style>

  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/bold.ttf);
        font-weight: bold;
    }
  </style>


    
    <link rel="stylesheet"
          type="text/css"
          href='/css/layout.css' />
    
    
  <link rel="stylesheet" type="text/css" href="/css/post.css"/>
  

  <meta name="generator" content="Hexo 7.1.1"></head>
  <body>
    
      <div id="search-mask" style="display:none">
  <div class="search-main" id="search-main">
    <div class="search__head">
      <div class="search-form">
        <svg t="1706347533072"
             class="icon"
             viewBox="0 0 1024 1024"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="7828"
             width="20"
             height="20">
          <path d="M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z" fill="#000000" p-id="7829">
          </path>
        </svg>
        <input id="search-input" placeholder="搜索文章">
        <svg t="1706361500528"
             id="search-clear"
             class="icon"
             viewBox="0 0 1024 1024"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="4351"
             width="20"
             height="20">
          <path d="M512 562.688l-264.2944 264.2944-50.688-50.688L461.312 512 197.0176 247.7056l50.688-50.688L512 461.312l264.2944-264.2944 50.688 50.688L562.688 512l264.2944 264.2944-50.688 50.688L512 562.688z" fill="#00" p-id="4352">
          </path>
        </svg>
      </div>
    </div>
    <div class="search__body" id="search-result"></div>
    <div class="search__foot"></div>
  </div>
</div>

    
    <div class="head">
      <div class="nav">
        <a href='/' class="nav-logo">
          <img alt="logo" height="60px" width="60px" src="/images/Doraemon128x128.ico" />
        </a>
        <input id="navBtn" type="checkbox" />
        <div class="nav-right">
          
            <div class="search-outer">
  <div class="search" id="search-btn">
    <svg t="1706347533072"
         class="icon"
         viewBox="0 0 1024 1024"
         version="1.1"
         xmlns="http://www.w3.org/2000/svg"
         p-id="7828"
         width="20"
         height="20">
      <path d="M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z" fill="#000000" p-id="7829">
      </path>
    </svg>
    <span>搜索</span>
    <span class="search-shortcut-key">Ctrl K</span>
  </div>
</div>

          
          <div class="nav-menu">
            
              
                <a class="nav-menu-item" href="/computerStudy">技术学习</a>
              
                <a class="nav-menu-item" href="/civilStudy">公考学习</a>
              
                <a class="nav-menu-item" href="/life">休闲生活</a>
              
            
            
          </div>
        </div>
        <label class="nav-btn" for="navBtn"></label>
      </div>
    </div>
    <div class="body">
      
  <article class="post-content">
    <div class="post-inner--toc">
      <div class="post-content__head">
        <div class="post-title">GAME104第九节</div>
        <div class="post-info">
          
  <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E%E5%AF%BC%E8%AE%BA-GAME104/" class="post-tag">#游戏引擎导论 GAME104</a>


          <span class="post-date">2024-11-07</span>
        </div>
      </div>
      
        <aside class="toc-outer">
          <div class="toc-title">目录</div>
          <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Animation-Blending-%E5%8A%A8%E7%94%BB%E7%BB%91%E5%AE%9A"><span class="post-toc-text">Animation Blending 动画绑定</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E7%BA%BF%E6%80%A7%E8%AE%A1%E7%AE%97Blend%E6%8F%92%E5%80%BC"><span class="post-toc-text">线性计算Blend插值</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Blender%E5%9F%BA%E7%A1%80"><span class="post-toc-text">Blender基础</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Blend-Space-%E6%B7%B7%E5%90%88%E7%A9%BA%E9%97%B4"><span class="post-toc-text">Blend Space 混合空间</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1D-Blend-Space"><span class="post-toc-text">1D Blend Space</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2D-Blend-Space"><span class="post-toc-text">2D Blend Space</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#delaunay-%E4%B8%89%E8%A7%92%E5%8C%96"><span class="post-toc-text">delaunay 三角化</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#ASM-%E7%8A%B6%E6%80%81%E6%9C%BA"><span class="post-toc-text">ASM 状态机</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Cross-Fades"><span class="post-toc-text">Cross Fades</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Cross-Fades-Curve"><span class="post-toc-text">Cross Fades Curve</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Layered-ASM"><span class="post-toc-text">Layered ASM</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Animation-Blend-Tree-%E5%8A%A8%E7%94%BB%E6%B7%B7%E5%90%88%E6%A0%91"><span class="post-toc-text">Animation Blend Tree 动画混合树</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#LERP-Blend-Node"><span class="post-toc-text">LERP Blend Node</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Layered-ASM-in-Blend-Tree"><span class="post-toc-text">Layered ASM in Blend Tree</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Blend-Tree-Node"><span class="post-toc-text">Blend Tree Node</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Forward-Kinematics%EF%BC%88FK%EF%BC%89"><span class="post-toc-text">Forward Kinematics（FK）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Inverse-Kinematics%EF%BC%88IK%EF%BC%89"><span class="post-toc-text">Inverse Kinematics（IK）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Two-Bones-IK"><span class="post-toc-text">Two Bones IK</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Multi-Joint-IK"><span class="post-toc-text">Multi-Joint IK</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CCD"><span class="post-toc-text">CCD</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#FABRIK"><span class="post-toc-text">FABRIK</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E9%AA%A8%E9%AA%BC%E7%BA%A6%E6%9D%9F%E9%97%AE%E9%A2%98"><span class="post-toc-text">骨骼约束问题</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Multiple-End-Effectors"><span class="post-toc-text">Multiple End-Effectors</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Jacobian-Matrix"><span class="post-toc-text">Jacobian Matrix</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#IK%E6%8C%91%E6%88%98"><span class="post-toc-text">IK挑战</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Blending%E5%92%8CIK%E7%9A%84%E7%AE%A1%E9%81%93%E6%B8%B2%E6%9F%93"><span class="post-toc-text">Blending和IK的管道渲染</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Facial-Animation-%E9%9D%A2%E9%83%A8%E5%8A%A8%E7%94%BB"><span class="post-toc-text">Facial Animation 面部动画</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Facial-Action-Coding-System"><span class="post-toc-text">Facial Action Coding System</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#28-Core-Action-Units"><span class="post-toc-text">28 Core Action Units</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Key-Pose-Blending"><span class="post-toc-text">Key Pose Blending</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Morph-Target-Animation"><span class="post-toc-text">Morph Target Animation</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E5%8A%A8%E7%94%BB%E9%87%8D%E5%AE%9A%E5%90%91"><span class="post-toc-text">动画重定向</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E6%80%BB%E7%BB%93"><span class="post-toc-text">总结</span></a></li></ol>
          <a href="#" class="toc-top">回到顶部</a>
        </aside>
      
      <div class="post-content__body">
        
          <div class="post-gallery">
            
          </div>
        
        <h1 id="Animation-Blending-动画绑定"><a href="#Animation-Blending-动画绑定" class="headerlink" title="Animation Blending 动画绑定"></a>Animation Blending 动画绑定</h1><p>LEPR：在动画的内部，帧与帧直接插值。</p>
<p>Blending：在不同动画之间进行插值。</p>
<h2 id="线性计算Blend插值"><a href="#线性计算Blend插值" class="headerlink" title="线性计算Blend插值"></a>线性计算Blend插值</h2><p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600.png" alt="image-20241107150523552"></p>
<ul>
<li>靠近哪个“信号”，就让其插值重一些。</li>
</ul>
<h2 id="Blender基础"><a href="#Blender基础" class="headerlink" title="Blender基础"></a>Blender基础</h2><p>时间Align</p>
<h1 id="Blend-Space-混合空间"><a href="#Blend-Space-混合空间" class="headerlink" title="Blend Space 混合空间"></a>Blend Space 混合空间</h1><h2 id="1D-Blend-Space"><a href="#1D-Blend-Space" class="headerlink" title="1D Blend Space"></a>1D Blend Space</h2><p>1D Blend Space 一维混合空间</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-1.png" alt="image-20241107151117225"></p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-2.png" alt="image-20241107151121792"></p>
<p>玩家可以从多个角度向前移动，混合三个片段中的任意角度：</p>
<ul>
<li>左侧方跑片段</li>
<li>向前跑片段</li>
<li>右侧方跑片段</li>
</ul>
<h2 id="2D-Blend-Space"><a href="#2D-Blend-Space" class="headerlink" title="2D Blend Space"></a>2D Blend Space</h2><p>2D Blend Space 二维混合空间</p>
<p>同时改变方向和速度，可以简单地将两个1D混合空间正交放置，得到一个2D混合空间：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-3.png" alt="image-20241107151205468"></p>
<h3 id="delaunay-三角化"><a href="#delaunay-三角化" class="headerlink" title="delaunay 三角化"></a>delaunay 三角化</h3><p>侧向跑时，速度可能会慢些，这时可以混合一些侧向运动。</p>
<p>这时可以使用delaunay 三角化：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-4.png" alt="image-20241107151346980"></p>
<h1 id="ASM-状态机"><a href="#ASM-状态机" class="headerlink" title="ASM 状态机"></a>ASM 状态机</h1><p>Action State Machine ASM 状态机。</p>
<p>ASM由节点和过渡组成。</p>
<h2 id="Cross-Fades"><a href="#Cross-Fades" class="headerlink" title="Cross Fades"></a>Cross Fades</h2><p>Cross Fades 交叉混合动画的方式有Smooth Transition和Frozen transition两种方式。</p>
<p>不同方式适用范围不同，呈现效果不同。</p>
<h2 id="Cross-Fades-Curve"><a href="#Cross-Fades-Curve" class="headerlink" title="Cross Fades Curve"></a>Cross Fades Curve</h2><p>Cross Fades Curve 交叉陷阱曲线。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-5.png" alt="image-20241107153905360"></p>
<p>不同的交叉褪色曲线可用于不同的需求，具体看需求。</p>
<h1 id="Layered-ASM"><a href="#Layered-ASM" class="headerlink" title="Layered ASM"></a>Layered ASM</h1><p>比较古老的一个状态机。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-6.png" alt="image-20241107154200314"></p>
<p>角色身体的不同部分同时进行不同的独立的或半独立的动作</p>
<h1 id="Animation-Blend-Tree-动画混合树"><a href="#Animation-Blend-Tree-动画混合树" class="headerlink" title="Animation Blend Tree 动画混合树"></a>Animation Blend Tree 动画混合树</h1><p>Animation Blend Tree 动画混合树</p>
<p>动画树最原始的就是表达树的思想。</p>
<h2 id="LERP-Blend-Node"><a href="#LERP-Blend-Node" class="headerlink" title="LERP Blend Node"></a>LERP Blend Node</h2><p>线性插值节点。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-7.png" alt="image-20241107154458662"></p>
<h2 id="Layered-ASM-in-Blend-Tree"><a href="#Layered-ASM-in-Blend-Tree" class="headerlink" title="Layered ASM in Blend Tree"></a>Layered ASM in Blend Tree</h2><p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-8.png" alt="image-20241107154603671"></p>
<h2 id="Blend-Tree-Node"><a href="#Blend-Tree-Node" class="headerlink" title="Blend Tree Node"></a>Blend Tree Node</h2><p>叶节点可以是Clip、Blend Space或者ASM。</p>
<p>非叶节点可以是Binary LERP blend node  线性插值（LERP）节点、Ternary (triangular) LERP blend node 三角LERP混合节点或者Binary additive blend node 二元加性混合节点。</p>
<p>即中间可以通过混合非常多的东西，使得混合的动画效果达到最好。</p>
<h1 id="Forward-Kinematics（FK）"><a href="#Forward-Kinematics（FK）" class="headerlink" title="Forward Kinematics（FK）"></a>Forward Kinematics（FK）</h1><p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-9.png" alt="image-20241107160010908"></p>
<p>使用运动学方程，通过骨骼（Joint）来计算出身体的各个部位应该是在什么位置。</p>
<h1 id="Inverse-Kinematics（IK）"><a href="#Inverse-Kinematics（IK）" class="headerlink" title="Inverse Kinematics（IK）"></a>Inverse Kinematics（IK）</h1><p>反向动力学。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-10.png" alt="image-20241107160002269"></p>
<p>设置身体部位的位置结果，通过结果来计算每一个骨骼（Joint）是怎么样的。</p>
<h2 id="Two-Bones-IK"><a href="#Two-Bones-IK" class="headerlink" title="Two Bones IK"></a>Two Bones IK</h2><p>两个Bone约束的IK</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-11.png" alt="image-20241107160119172"></p>
<p>大腿和小腿代表三角形的两条边，目标点也确定了，就可以确定一个唯一的三角形，从而得到弯曲的角度。</p>
<p>在三维（3D）空间中，实际就是两个球的解。这个求出的解实际上是一个圆环：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-12.png" alt="image-20241107160324012"></p>
<ul>
<li>表现在人身上就是内八字或外八字都可以。</li>
</ul>
<p>确定一个人运动的Reference Vector 参考向量，可以确定一个方向：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-13.png" alt="image-20241107160455625"></p>
<h2 id="Multi-Joint-IK"><a href="#Multi-Joint-IK" class="headerlink" title="Multi-Joint IK"></a>Multi-Joint IK</h2><p>多关节“长链”的IK。</p>
<p><strong>求解复杂性：</strong></p>
<ul>
<li><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-14.png" alt="image-20241107160745749"></li>
<li>自由度太高，计算的成本太大，因为是高维非线性函数的实时求解。</li>
<li>可能有多个解决方案、唯一解决方案或无解决方案</li>
</ul>
<p><strong>求解目标的可能性：</strong></p>
<ul>
<li><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-15.png" alt="image-20241107160911334"></li>
<li>假设把所有骨头拉直，查看能不能到达目标。</li>
</ul>
<p><strong>Human Skeleton的局限性：</strong></p>
<ul>
<li>人的关节是有一定规律的，并不能随意的旋转，是有一定的活动范围。</li>
<li><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-16.png" alt="image-20241107161021273"></li>
</ul>
<p>制作一个简单的IK可以用到CCD或FABRIK。</p>
<h3 id="CCD"><a href="#CCD" class="headerlink" title="CCD"></a>CCD</h3><p>启发式的算法</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-17.gif" alt="GIF 2024-11-7 16-32-59"></p>
<p>joint-joint，使未端执行器尽可能靠近目标，解决定向空间中的IK问题</p>
<p>优化：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-18.png" alt="image-20241107162318104"></p>
<p>目标点做一个相对大的一个范围，节点翻到那个大致的范围差不多。后续迭代，就逐步收缩范围。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-19.png" alt="image-20241107162606670"></p>
<p>旋转的时候，设置一个角度上限。</p>
<h3 id="FABRIK"><a href="#FABRIK" class="headerlink" title="FABRIK"></a>FABRIK</h3><p>FABRIK Forward And Backward Reaching Inverse Kinematics</p>
<p>向前迭代一遍、向后迭代一遍。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-20.gif" alt="FABRIK"></p>
<p>从第一个jointA强行拉到目标点处，再在上一个jointB和这个jointA之间连一条线，将骨头旋转到这个线上去。</p>
<p>骨头长度是固定的，这时肯定会让jointB移动到了新的位置。这时再找jointB的上一个jointC，然后重复。</p>
<h3 id="骨骼约束问题"><a href="#骨骼约束问题" class="headerlink" title="骨骼约束问题"></a>骨骼约束问题</h3><p>FABRIKF 带约束<br>重新定位·可以在每个步骤中执行联合限制，方法是取出所产生的方向，并迫使其保持在有效范围内。</p>
<h3 id="Multiple-End-Effectors"><a href="#Multiple-End-Effectors" class="headerlink" title="Multiple End-Effectors"></a>Multiple End-Effectors</h3><p>Multiple End-Effectors 多目标点</p>
<p>比如攀岩时，手脚等目标点都会不一样，这时就会也很复杂。</p>
<h4 id="Jacobian-Matrix"><a href="#Jacobian-Matrix" class="headerlink" title="Jacobian Matrix"></a>Jacobian Matrix</h4><p>目前主要是采样雅可比矩阵来实现。</p>
<p>用向量来表示joint的旋转移动。对这种高维方程组，可以用梯度来处理。。。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-21.png" alt="image-20241107164833264"></p>
<p>后续的物理系统会专门讲到。</p>
<h2 id="IK挑战"><a href="#IK挑战" class="headerlink" title="IK挑战"></a>IK挑战</h2><p>自我碰撞：IK是抽象的计算实现，但是当骨骼外有蒙皮等等，就会有问题。</p>
<p>IK 带有移动过程中的预测：真正去提前预测移动过程的动作改变之类的，是很困难的。</p>
<p>人类的自然行为：目前IK并没有没有考虑动力学的一些规律。</p>
<h1 id="Blending和IK的管道渲染"><a href="#Blending和IK的管道渲染" class="headerlink" title="Blending和IK的管道渲染"></a>Blending和IK的管道渲染</h1><p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-22.png" alt="image-20241107170034863"></p>
<h1 id="Facial-Animation-面部动画"><a href="#Facial-Animation-面部动画" class="headerlink" title="Facial Animation 面部动画"></a>Facial Animation 面部动画</h1><p>面部动画</p>
<h2 id="Facial-Action-Coding-System"><a href="#Facial-Action-Coding-System" class="headerlink" title="Facial Action Coding System"></a>Facial Action Coding System</h2><p>Facial Action Coding System FACS 面部动作编码系统</p>
<p>一个根据面部特征对人类面部动作进行分类的系统。</p>
<p>把人类常用的表情总结成了48个。</p>
<h2 id="28-Core-Action-Units"><a href="#28-Core-Action-Units" class="headerlink" title="28 Core Action Units"></a>28 Core Action Units</h2><p>苹果公司提取的28个核心AU</p>
<p>23对称AU分为两种基本动作</p>
<p>基本动作设置根据动画制作要求而有所不同</p>
<p>嘴巴、眼睛等都是对称的，只用记录特定的闭和开即可。</p>
<h2 id="Key-Pose-Blending"><a href="#Key-Pose-Blending" class="headerlink" title="Key Pose Blending"></a>Key Pose Blending</h2><p>关键表情的叠加。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-23.png" alt="image-20241107170922748"></p>
<p>但是可能会出现一些问题：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-24.png" alt="image-20241107170935682"></p>
<h3 id="Morph-Target-Animation"><a href="#Morph-Target-Animation" class="headerlink" title="Morph Target Animation"></a>Morph Target Animation</h3><p>存储AU时，存的是这个表情下对应区域相对于neutral pose（中性表情）下的顶点的offset。</p>
<p> 骨骼动画表现不是很细腻，所以会用到此技术。</p>
<h1 id="动画重定向"><a href="#动画重定向" class="headerlink" title="动画重定向"></a>动画重定向</h1><p>把一个角色的动画，应用到另一个身材比例完全不同的角色身上。</p>
<p>Source Character：动捕采集的原角色。</p>
<p>Target Character：动画要应用的目标角色。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Disjoint3/ImgHost@main/Img/2024/11/08/20241108214600-25.png" alt="image-20241107173003033"></p>
<p>在retarget时，传送的是相对的位置、相对的旋转和相对的放缩。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>blending实际连接了gameplay和动画系统。</p>
<p>FK的基础核心系统，能够基础的让人物有一个动画。</p>
<p>环境中的互动，通过IK给角色增加反向的约束，让角色和环境的约束更加自然。</p>
<p>骨骼加上 Morph target animation的方法，实现人物角色表情的精细的动画。</p>
<p>最后就是，当角色的外形、身高体重都会有变化，通过动画的retarget（重定向）来实现动画资产的复用。</p>

      </div>
    </div>
    
      <script src='https://unpkg.com/mermaid@latest/dist/mermaid.min.js'></script>
      <script>
        if (window.mermaid) {
          mermaid.initialize({"startOnload":true});
        }
      </script>
    
  </article>
  <div class="post__foot">
    
      <div class="like-author">
  <input type="checkbox" id="likeCode" />
  <div class="author-face">
    <img height="100px"
         width="100px"
         id="front-face"
         alt="author face"
         src="/assets/Head.jpg" />
    <img height="100px"
         width="100px"
         id="back-face"
         alt="like code"
         src="/assets/Pay.jpg" />
  </div>
  <div class="like-text">“喜欢的话，请给作者倒杯卡布奇诺”</div>
  <label for="likeCode" class="like-btn">
    <svg viewBox="0 0 1024 1024"
         width="20px"
         style="margin-right: 10px"
         height="20px">
      <path d="M466.88 908.96L113.824 563.296a270.08 270.08 0 0 1 0-387.392c108.8-106.56 284.896-106.56 393.696 0 1.504 1.472 2.976 2.944 4.448 4.48 1.472-1.536 2.944-3.008 4.448-4.48 108.8-106.56 284.896-106.56 393.696 0a269.952 269.952 0 0 1 34.016 347.072l-387.392 385.6a64 64 0 0 1-89.92 0.384z" p-id="13650" fill="#ee4242" />
    </svg>
    喜欢作者
  </label>
</div>

    
    <div class="post-nav">
  
    <a class="post-nav-item-left" href="/2024/11/11/GAME104%E7%AC%AC%E5%8D%81%E8%8A%82/">
      <div class="text-align">
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596" />
        </svg>
        <span class="text-small">上一篇</span>
      </div>
      <div>GAME104第十节</div>
    </a>
  
  <div class="vhr"></div>
  
    <a class="post-nav-item-right" href="/2024/11/06/GAME104%E7%AC%AC%E5%85%AB%E8%8A%82/">
      <div class="text-align">
        <span class="text-small">下一篇</span>
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             transform="scale(-1,-1)"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596" />
        </svg>
      </div>
      GAME104第八节
    </a>
  
</div>

    
      <div class="related-post">
  <div class="related__head">
  <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E%E5%AF%BC%E8%AE%BA-GAME104/" class="post-tag">#游戏引擎导论 GAME104</a>

</div>
  <div class="realated__body">
    
      <div class="null"><div class="null-item"><div class="null-title"><a href="\2024\10\28\GAME104第一节\" title="GAME104第一节" rel="bookmark">GAME104第一节</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\10\28\GAME104第二节\" title="GAME104第二节" rel="bookmark">GAME104第二节</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\10\28\GAME104第三节\" title="GAME104第三节" rel="bookmark">GAME104第三节</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\04\13\hexo博客搭建\" title="hexo博客搭建" rel="bookmark">hexo博客搭建</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\04\13\Shader学习（一）：基本概念\" title="Shader学习（一）：基本概念" rel="bookmark">Shader学习（一）：基本概念</a></div></div></div>
    
  </div>
</div>

    
    
  </div>

    </div>
    <div class="foot">
      <div class="foot-inner">
        <div class="foot__head">
          
            <div class="foot-line">
              <div class="matts">不</div><div class="matts">气</div><div class="matts">馁</div>
            </div>
          
            <div class="foot-line">
              <div class="matts">有</div><div class="matts">召</div><div class="matts">唤</div>
            </div>
          
            <div class="foot-line">
              <div class="matts">爱</div><div class="matts">自</div><div class="matts">由</div>
            </div>
          
        </div>
        <div class="foot__body">
          
            <div class="foot-item">
              <div class="foot-item__head">朋友</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/icon/icon-link.svg" />
                    <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">Theme Tranquility</a>
                  </div>
                
                <div class="text">
                  <img alt="link" height="20px" width="20px" src="/images/icon/icon-link+.svg" />
                  <a class="foot-link"
                     href="mailto:1463890764@qq.com?subject=%E7%94%B3%E8%AF%B7%20Hozen.site%20%E7%9A%84%E5%8F%8B%E9%93%BE%E4%BD%8D%E7%BD%AE">
                  申请友链</a>
                </div>
              </div>
            </div>
          
          
            <div class="foot-item">
              <div class="foot-item__head">账号</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-github.svg" />
                    <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/Disjoint3">Disjoint3</a>
                  </div>
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-zh.svg" />
                    <a class="foot-link" target="_blank" rel="noopener" href="https://www.zhihu.com/people/despair-49-89">despair</a>
                  </div>
                
              </div>
            </div>
          
          <div class="foot-item">
            <div class="foot-item__head">联系</div>
            <div class="foot-item__body">
              <div class="text">
                <img alt="link" height="20px" width="20px" src="/images/icon/icon-email.svg" />
                <a class="foot-link" href="mailto:1463890764@qq.com">1463890764@qq.com</a>
              </div>
            </div>
          </div>
        </div>
        <div class="copyright">
          <a href="http://example.com">渔人的小小世界</a> &nbsp;|&nbsp;由&nbsp;<a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>&nbsp;及&nbsp;
          <svg width="20" height="20" viewBox="0 0 725 725">
            <path fill-rule="evenodd" fill="rgb(221, 221, 221)" d="M145.870,236.632 L396.955,103.578 L431.292,419.44 L156.600,522.53 L145.870,236.632 Z" />
            <path fill-rule="evenodd" fill="rgb(159, 159, 159)" d="M396.955,103.578 L564.345,234.486 L611.558,513.469 L431.292,419.44 L396.955,103.578 Z" />
            <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M431.292,419.44 L611.558,513.469 L358.327,595.18 L156.600,522.53 L431.292,419.44 Z" />
          </svg>
          <a target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">致远</a>&nbsp;驱动
        </div>
      </div>
    </div>
    
    
      <script src="/js/search.js"></script>
      <script>searchInitialize("/search.json")</script>
    
    
  

  </body>
</html>
